!function(a){"function"==typeof define&&define.amd?define(["jquery","moment"],a):a(jQuery,moment)}(function(a,b){function d(a,b){return b.longDateFormat("LT").replace(":mm","(:mm)").replace(/(\Wmm)$/,"($1)").replace(/\s*a$/i,"t")}function e(a,b){var c=b.longDateFormat("L");return c=c.replace(/^Y+[^\w\s]*|[^\w\s]*Y+$/g,""),a.isRTL?c+=" ddd":c="ddd "+c,c}function j(a){k(c,a)}function k(b){function c(c,d){a.isPlainObject(d)&&a.isPlainObject(b[c])&&!l(c)?b[c]=k({},b[c],d):void 0!==d&&(b[c]=d)}for(var d=1;d<arguments.length;d++)a.each(arguments[d],c);return b}function l(a){return/(Time|Duration)$/.test(a)}function m(d,e){function o(a){var c=b.localeData||b.langData;return c.call(b,a)||c.call(b,"en")}function F(a){x?J()&&(N(),L(a)):G()}function G(){y=l.theme?"ui":"fc",d.addClass("fc"),l.isRTL?d.addClass("fc-rtl"):d.addClass("fc-ltr"),l.theme?d.addClass("ui-widget"):d.addClass("fc-unthemed"),x=a("<div class='fc-view-container'/>").prependTo(d),v=new n(j,l),w=v.render(),w&&d.prepend(w),K(l.defaultView),l.handleWindowResize&&(B=P(R,l.windowResizeDelay),a(window).resize(B))}function H(){z&&z.destroy(),v.destroy(),x.remove(),d.removeClass("fc fc-ltr fc-rtl fc-unthemed ui-widget"),a(window).unbind("resize",B)}function J(){return d.is(":visible")}function K(a){L(0,a)}function L(b,c){C++,z&&c&&z.name!==c&&(v.deactivateButton(z.name),ma(),z.start&&z.destroy(),z.el.remove(),z=null),!z&&c&&(z=new i[c](j),z.el=a("<div class='fc-view fc-"+c+"-view' />").appendTo(x),v.activateButton(c)),z&&(b&&(D=z.incrementDate(D,b)),z.start&&!b&&D.isWithin(z.intervalStart,z.intervalEnd)||J()&&(ma(),z.start&&z.destroy(),z.render(D),na(),_(),aa(),V())),na(),C--}function M(a){if(J())return a&&Q(),C++,z.updateSize(!0),C--,!0}function N(){J()&&Q()}function Q(){A="number"==typeof l.contentHeight?l.contentHeight:"number"==typeof l.height?l.height-(w?w.outerHeight(!0):0):Math.round(x.width()/Math.max(l.aspectRatio,.5))}function R(a){!C&&a.target===window&&z.start&&M(!0)&&z.trigger("windowResize",u)}function S(){U(),X()}function T(){J()&&(ma(),z.destroyEvents(),z.renderEvents(E),na())}function U(){ma(),z.destroyEvents(),na()}function V(){!l.lazyFetching||s(z.start,z.end)?X():T()}function X(){t(z.start,z.end)}function Y(a){E=a,T()}function Z(){T()}function _(){v.updateTitle(z.title)}function aa(){var a=j.getNow();a.isWithin(z.intervalStart,z.intervalEnd)?v.disableButton("today"):v.enableButton("today")}function ba(a,b){a=j.moment(a),b=b?j.moment(b):a.hasTime()?a.clone().add(j.defaultTimedEventDuration):a.clone().add(j.defaultAllDayEventDuration),z.select(a,b)}function ca(){z&&z.unselect()}function da(){L(-1)}function ea(){L(1)}function fa(){D.add(-1,"years"),L()}function ga(){D.add(1,"years"),L()}function ha(){D=j.getNow(),L()}function ia(a){D=j.moment(a),L()}function ja(a){D.add(b.duration(a)),L()}function ka(a,b){var c,d;b&&void 0!==i[b]||(b=b||"day",c=v.getViewsWithButtons().join(" "),d=c.match(new RegExp("\\w+"+O(b))),d||(d=c.match(/\w+Day/)),b=d?d[0]:"agendaDay"),D=a,K(b)}function la(){return D.clone()}function ma(){x.css({width:"100%",height:x.height(),overflow:"hidden"})}function na(){x.css({width:"",height:"",overflow:""})}function oa(){return j}function pa(){return z}function qa(a,b){return void 0===b?l[a]:void("height"!=a&&"contentHeight"!=a&&"aspectRatio"!=a||(l[a]=b,M(!0)))}function ra(a,b){if(l[a])return l[a].apply(b||u,Array.prototype.slice.call(arguments,2))}var j=this;e=e||{};var m,l=k({},c,e);m=l.lang in f?f[l.lang]:f[c.lang],m&&(l=k({},c,m,e)),l.isRTL&&(l=k({},c,g,m||{},e)),j.options=l,j.render=F,j.destroy=H,j.refetchEvents=S,j.reportEvents=Y,j.reportEventChange=Z,j.rerenderEvents=T,j.changeView=K,j.select=ba,j.unselect=ca,j.prev=da,j.next=ea,j.prevYear=fa,j.nextYear=ga,j.today=ha,j.gotoDate=ia,j.incrementDate=ja,j.zoomTo=ka,j.getDate=la,j.getCalendar=oa,j.getView=pa,j.option=qa,j.trigger=ra;var p=I(o(l.lang));if(l.monthNames&&(p._months=l.monthNames),l.monthNamesShort&&(p._monthsShort=l.monthNamesShort),l.dayNames&&(p._weekdays=l.dayNames),l.dayNamesShort&&(p._weekdaysShort=l.dayNamesShort),null!=l.firstDay){var r=I(p._week);r.dow=l.firstDay,p._week=r}j.defaultAllDayEventDuration=b.duration(l.defaultAllDayEventDuration),j.defaultTimedEventDuration=b.duration(l.defaultTimedEventDuration),j.moment=function(){var a;return"local"===l.timezone?(a=h.moment.apply(null,arguments),a.hasTime()&&a.local()):a="UTC"===l.timezone?h.moment.utc.apply(null,arguments):h.moment.parseZone.apply(null,arguments),"_locale"in a?a._locale=p:a._lang=p,a},j.getIsAmbigTimezone=function(){return"local"!==l.timezone&&"UTC"!==l.timezone},j.rezoneDate=function(a){return j.moment(a.toArray())},j.getNow=function(){var a=l.now;return"function"==typeof a&&(a=a()),j.moment(a)},j.calculateWeekNumber=function(a){var b=l.weekNumberCalculation;return"function"==typeof b?b(a):"local"===b?a.week():"ISO"===b.toUpperCase()?a.isoWeek():void 0},j.getEventEnd=function(a){return a.end?a.end.clone():j.getDefaultEventEnd(a.allDay,a.start)},j.getDefaultEventEnd=function(a,b){var c=b.clone();return a?c.stripTime().add(j.defaultAllDayEventDuration):c.add(j.defaultTimedEventDuration),j.getIsAmbigTimezone()&&c.stripZone(),c},j.formatRange=function(a,b,c){return"function"==typeof c&&(c=c.call(j,l,p)),$(a,b,c,null,l.isRTL)},j.formatDate=function(a,b){return"function"==typeof b&&(b=b.call(j,l,p)),W(a,b)},q.call(j,l);var v,w,x,y,z,A,B,D,s=j.isFetchNeeded,t=j.fetchEvents,u=d[0],C=0,E=[];D=null!=l.defaultDate?j.moment(l.defaultDate):j.getNow(),j.getSuggestedViewHeight=function(){return void 0===A&&N(),A},j.isHeightAuto=function(){return"auto"===l.contentHeight||"auto"===l.height}}function n(b,c){function h(){var b=c.header;if(g=c.theme?"ui":"fc",b)return e=a("<div class='fc-toolbar'/>").append(k("left")).append(k("right")).append(k("center")).append('<div class="fc-clear"/>')}function j(){e.remove()}function k(d){var e=a('<div class="fc-'+d+'"/>'),h=c.header[d];return h&&a.each(h.split(" "),function(d){var k,h=a(),j=!0;a.each(this.split(","),function(d,e){var k,l,m,n,o,p,q,r;"title"==e?(h=h.add(a("<h2>&nbsp;</h2>")),j=!1):(b[e]?k=function(){b[e]()}:i[e]&&(k=function(){b.changeView(e)},f.push(e)),k&&(l=D(c.themeButtonIcons,e),m=D(c.buttonIcons,e),n=D(c.defaultButtonText,e),o=D(c.buttonText,e),p=o?M(o):l&&c.theme?"<span class='ui-icon ui-icon-"+l+"'></span>":m&&!c.theme?"<span class='fc-icon fc-icon-"+m+"'></span>":M(n||e),q=["fc-"+e+"-button",g+"-button",g+"-state-default"],r=a('<button type="button" class="'+q.join(" ")+'">'+p+"</button>").click(function(){r.hasClass(g+"-state-disabled")||(k(),(r.hasClass(g+"-state-active")||r.hasClass(g+"-state-disabled"))&&r.removeClass(g+"-state-hover"))}).mousedown(function(){r.not("."+g+"-state-active").not("."+g+"-state-disabled").addClass(g+"-state-down")}).mouseup(function(){r.removeClass(g+"-state-down")}).hover(function(){r.not("."+g+"-state-active").not("."+g+"-state-disabled").addClass(g+"-state-hover")},function(){r.removeClass(g+"-state-hover").removeClass(g+"-state-down")}),h=h.add(r)))}),j&&h.first().addClass(g+"-corner-left").end().last().addClass(g+"-corner-right").end(),h.length>1?(k=a("<div/>"),j&&k.addClass("fc-button-group"),k.append(h),e.append(k)):e.append(h)}),e}function l(a){e.find("h2").text(a)}function m(a){e.find(".fc-"+a+"-button").addClass(g+"-state-active")}function n(a){e.find(".fc-"+a+"-button").removeClass(g+"-state-active")}function o(a){e.find(".fc-"+a+"-button").attr("disabled","disabled").addClass(g+"-state-disabled")}function p(a){e.find(".fc-"+a+"-button").removeAttr("disabled").removeClass(g+"-state-disabled")}function q(){return f}var d=this;d.render=h,d.destroy=j,d.updateTitle=l,d.activateButton=m,d.deactivateButton=n,d.disableButton=o,d.enableButton=p,d.getViewsWithButtons=q;var g,e=a(),f=[]}function q(b){function t(a,b){return!k||a.clone().stripZone()<k.clone().stripZone()||b.clone().stripZone()>l.clone().stripZone()}function u(a,b){k=a,l=b,s=[];var c=++m,d=j.length;n=d;for(var e=0;e<d;e++)v(j[e],c)}function v(b,c){w(b,function(d){var g,h,e=a.isArray(b.events);if(c==m){if(d)for(g=0;g<d.length;g++)h=d[g],e||(h=N(h,b)),h&&s.push(h);n--,n||f(s)}})}function w(d,e){var f,i,g=h.sourceFetchers;for(f=0;f<g.length;f++){if(i=g[f].call(c,d,k.clone(),l.clone(),b.timezone,e),i===!0)return;if("object"==typeof i)return void w(i,e)}var j=d.events;if(j)a.isFunction(j)?(J(),j.call(c,k.clone(),l.clone(),b.timezone,function(a){e(a),M()})):a.isArray(j)?e(j):e();else{var m=d.url;if(m){var r,n=d.success,p=d.error,q=d.complete;r=a.isFunction(d.data)?d.data():d.data;var s=a.extend({},r||{}),t=L(d.startParam,b.startParam),u=L(d.endParam,b.endParam),v=L(d.timezoneParam,b.timezoneParam);t&&(s[t]=k.format()),u&&(s[u]=l.format()),b.timezone&&"local"!=b.timezone&&(s[v]=b.timezone),J(),a.ajax(a.extend({},o,d,{data:s,success:function(b){b=b||[];var c=K(n,this,arguments);a.isArray(c)&&(b=c),e(b)},error:function(){K(p,this,arguments),e()},complete:function(){K(q,this,arguments),M()}}))}else e()}}function x(a){var b=y(a);b&&(j.push(b),n++,v(b,m))}function y(b){var e,f,d=h.sourceNormalizers;if(a.isFunction(b)||a.isArray(b)?e={events:b}:"string"==typeof b?e={url:b}:"object"==typeof b&&(e=a.extend({},b)),e){for(e.className?"string"==typeof e.className&&(e.className=e.className.split(/\s+/)):e.className=[],a.isArray(e.events)&&(e.origArray=e.events,e.events=a.map(e.events,function(a){return N(a,e)})),f=0;f<d.length;f++)d[f].call(c,e);return e}}function z(b){j=a.grep(j,function(a){return!A(a,b)}),s=a.grep(s,function(a){return!A(a.source,b)}),f(s)}function A(a,b){return a&&b&&B(a)==B(b)}function B(a){return("object"==typeof a?a.origArray||a.url||a.events:null)||a}function C(a){a.start=c.moment(a.start),a.end&&(a.end=c.moment(a.end)),O(a),E(a),f(s)}function E(a){var b,c,d,e;for(b=0;b<s.length;b++)if(c=s[b],c._id==a._id&&c!==a)for(d=0;d<D.length;d++)e=D[d],void 0!==a[e]&&(c[e]=a[e])}function G(a,b){var c=N(a);c&&(c.source||(b&&(i.events.push(c),c.source=i),s.push(c)),f(s))}function H(b){var c,d;for(null==b?b=function(){return!0}:a.isFunction(b)||(c=b+"",b=function(a){return a._id==c}),s=a.grep(s,b,!0),d=0;d<j.length;d++)a.isArray(j[d].events)&&(j[d].events=a.grep(j[d].events,b,!0));f(s)}function I(b){return a.isFunction(b)?a.grep(s,b):null!=b?(b+="",a.grep(s,function(a){return a._id==b})):s}function J(){q++||d("loading",null,!0,e())}function M(){--q||d("loading",null,!1,e())}function N(d,e){var h,i,j,k,f={};if(b.eventDataTransform&&(d=b.eventDataTransform(d)),e&&e.eventDataTransform&&(d=e.eventDataTransform(d)),h=c.moment(d.start||d.date),h.isValid()&&(i=null,!d.end||(i=c.moment(d.end),i.isValid())))return j=d.allDay,void 0===j&&(k=L(e?e.allDayDefault:void 0,b.allDayDefault),j=void 0!==k?k:!(h.hasTime()||i&&i.hasTime())),j?(h.hasTime()&&h.stripTime(),i&&i.hasTime()&&i.stripTime()):(h.hasTime()||(h=c.rezoneDate(h)),i&&!i.hasTime()&&(i=c.rezoneDate(i))),a.extend(f,d),e&&(f.source=e),f._id=d._id||(void 0===d.id?"_fc"+p++:d.id+""),d.className?"string"==typeof d.className?f.className=d.className.split(/\s+/):f.className=d.className:f.className=[],f.allDay=j,f.start=h,f.end=i,b.forceEventDuration&&!f.end&&(f.end=g(f)),r(f),f}function O(a,b,d){var i,j,k,l,e=a._allDay,f=a._start,g=a._end,h=!1;return b||d||(b=a.start,d=a.end),i=a.allDay!=e?a.allDay:!(b||d).hasTime(),i&&(b&&(b=b.clone().stripTime()),d&&(d=d.clone().stripTime())),b&&(j=i?F(b,f.clone().stripTime()):F(b,f)),i!=e?h=!0:d&&(k=F(d||c.getDefaultEventEnd(i,b||f),b||f).subtract(F(g||c.getDefaultEventEnd(e,f),f))),l=P(I(a._id),h,i,j,k),{dateDelta:j,durationDelta:k,undo:l}}function P(d,e,f,g,h){var i=c.getIsAmbigTimezone(),j=[];return a.each(d,function(a,d){var k=d._allDay,l=d._start,m=d._end,n=null!=f?f:k,o=l.clone(),p=!e&&m?m.clone():null;n?(o.stripTime(),p&&p.stripTime()):(o.hasTime()||(o=c.rezoneDate(o)),p&&!p.hasTime()&&(p=c.rezoneDate(p))),p||!b.forceEventDuration&&!+h||(p=c.getDefaultEventEnd(n,o)),o.add(g),p&&p.add(g).add(h),i&&(+g||+h)&&(o.stripZone(),p&&p.stripZone()),d.allDay=n,d.start=o,d.end=p,r(d),j.push(function(){d.allDay=k,d.start=l,d.end=m,r(d)})}),function(){for(var a=0;a<j.length;a++)j[a]()}}var c=this;c.isFetchNeeded=t,c.fetchEvents=u,c.addEventSource=x,c.removeEventSource=z,c.updateEvent=C,c.renderEvent=G,c.removeEvents=H,c.clientEvents=I,c.mutateEvent=O;var k,l,d=c.trigger,e=c.getView,f=c.reportEvents,g=c.getEventEnd,i={events:[]},j=[i],m=0,n=0,q=0,s=[];a.each((b.events?[b.events]:[]).concat(b.eventSources||[]),function(a,b){var c=y(b);c&&j.push(c)});var D=["title","url","allDay","className","editable","color","backgroundColor","borderColor","textColor"]}function r(a){a._allDay=a.allDay,a._start=a.start.clone(),a._end=a.end?a.end.clone():null}function s(a,b){b.left&&a.css({"border-left-width":1,"margin-left":b.left-1}),b.right&&a.css({"border-right-width":1,"margin-right":b.right-1})}function t(a){a.css({"margin-left":"","margin-right":"","border-left-width":"","border-right-width":""})}function u(b,c,d){var e=Math.floor(c/b.length),f=Math.floor(c-e*(b.length-1)),g=[],h=[],i=[],j=0;v(b),b.each(function(c,d){var k=c===b.length-1?f:e,l=a(d).outerHeight(!0);l<k?(g.push(d),h.push(l),i.push(a(d).height())):j+=l}),d&&(c-=j,e=Math.floor(c/g.length),f=Math.floor(c-e*(g.length-1))),a(g).each(function(b,c){var d=b===g.length-1?f:e,j=h[b],k=i[b],l=d-(j-k);j<d&&a(c).height(l)})}function v(a){a.height("")}function w(b){var c=0;return b.find("> *").each(function(b,d){var e=a(d).outerWidth();e>c&&(c=e)}),c++,b.width(c),c}function x(a,b){return a.height(b).addClass("fc-scroller"),a[0].scrollHeight-1>a[0].clientHeight||(y(a),!1)}function y(a){a.height("").removeClass("fc-scroller")}function z(b){var c=b.css("position"),d=b.parents().filter(function(){var b=a(this);return/(auto|scroll)/.test(b.css("overflow")+b.css("overflow-y")+b.css("overflow-x"))}).eq(0);return"fixed"!==c&&d.length?d:a(b[0].ownerDocument||document)}function A(a){var b=a.offset().left,c=b+a.width(),d=a.children(),e=d.offset().left,f=e+d.outerWidth();return{left:e-b,right:c-f}}function B(a){return 1==a.which&&!a.ctrlKey}function C(a,b,c,d){var e,f,g,h;if(b>c&&a<d)return a>=c?(e=a.clone(),g=!0):(e=c.clone(),g=!1),b<=d?(f=b.clone(),h=!0):(f=d.clone(),h=!1),{start:e,end:f,isStart:g,isEnd:h}}function D(a,b){if(a=a||{},void 0!==a[b])return a[b];for(var e,c=b.split(/(?=[A-Z])/),d=c.length-1;d>=0;d--)if(e=a[c[d].toLowerCase()],void 0!==e)return e;return a.default}function F(a,c){return b.duration({days:a.clone().stripTime().diff(c.clone().stripTime(),"days"),ms:a.time()-c.time()})}function G(a){return"[object Date]"===Object.prototype.toString.call(a)||a instanceof Date}function H(a,b){return a-b}function I(a){var b=function(){};return b.prototype=a,new b}function J(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])}function K(b,c,d){if(a.isFunction(b)&&(b=[b]),b){var e,f;for(e=0;e<b.length;e++)f=b[e].apply(c,d)||f;return f}}function L(){for(var a=0;a<arguments.length;a++)if(void 0!==arguments[a])return arguments[a]}function M(a){return(a+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function N(a){return a.replace(/&.*?;/g,"")}function O(a){return a.charAt(0).toUpperCase()+a.slice(1)}function P(a,b){var c,d,e,f,g=function(){var h=+new Date-f;h<b&&h>0?c=setTimeout(g,b-h):(c=null,a.apply(e,d),c||(e=d=null))};return function(){e=this,d=arguments,f=+new Date,c||(c=setTimeout(g,b))}}function S(c,d,e){var h,i,j,k,f=c[0],g=1==c.length&&"string"==typeof f;return b.isMoment(f)?(k=b.apply(null,c),f._ambigTime&&(k._ambigTime=!0),f._ambigZone&&(k._ambigZone=!0)):G(f)||void 0===f?k=b.apply(null,c):(h=!1,i=!1,g?Q.test(f)?(f+="-01",c=[f],h=!0,i=!0):(j=R.exec(f))&&(h=!j[5],i=!0):a.isArray(f)&&(i=!0),k=d?b.utc.apply(b,c):b.apply(null,c),h?(k._ambigTime=!0,k._ambigZone=!0):e&&(i?k._ambigZone=!0:g&&k.zone(f))),new T(k)}function T(a){J(this,a)}function U(a,b){var f,c=[],d=!1,e=!1;for(f=0;f<a.length;f++)c.push(h.moment.parseZone(a[f])),d=d||c[f]._ambigTime,e=e||c[f]._ambigZone;for(f=0;f<c.length;f++)d&&!b?c[f].stripTime():e&&c[f].stripZone();return c}function V(a,c){return b.fn.format.call(a,c)}function W(a,b){return X(a,da(b))}function X(a,b){var d,c="";for(d=0;d<b.length;d++)c+=Z(a,b[d]);return c}function Z(a,b){var c,d;return"string"==typeof b?b:(c=b.token)?Y[c]?Y[c](a):V(a,c):b.maybe&&(d=X(a,b.maybe),d.match(/[1-9]/))?d:""}function $(a,b,c,d,e){var f;return a=h.moment.parseZone(a),b=h.moment.parseZone(b),f=(a.localeData||a.lang).call(a),c=f.longDateFormat(c)||c,d=d||" - ",_(a,b,da(c),d,e)}function _(a,b,c,d,e){var f,g,i,k,h="",j="",l="",m="",n="";for(g=0;g<c.length&&(f=ba(a,b,c[g]),f!==!1);g++)h+=f;for(i=c.length-1;i>g&&(f=ba(a,b,c[i]),f!==!1);i--)j=f+j;for(k=g;k<=i;k++)l+=Z(a,c[k]),m+=Z(b,c[k]);return(l||m)&&(n=e?m+d+l:l+d+m),h+n+j}function ba(a,b,c){var d,e;return"string"==typeof c?c:!!((d=c.token)&&(e=aa[d.charAt(0)],e&&a.isSame(b,e)))&&V(a,d)}function da(a){return a in ca?ca[a]:ca[a]=ea(a)}function ea(a){for(var d,b=[],c=/\[([^\]]*)\]|\(([^\)]*)\)|(LT|(\w)\4*o?)|([^\w\[\(]+)/g;d=c.exec(a);)d[1]?b.push(d[1]):d[2]?b.push({maybe:ea(d[2])}):d[3]?b.push({token:d[3]}):d[5]&&b.push(d[5]);return b}function fa(a){this.options=a||{}}function ga(a){this.grid=a}function ha(a){this.coordMaps=a}function ia(a,b){this.coordMap=a,this.options=b||{}}function ja(a,b){return!a&&!b||!(!a||!b)&&(a.grid===b.grid&&a.row===b.row&&a.col===b.col)}function ka(b,c){this.options=c=c||{},this.sourceEl=b,this.parentEl=c.parentEl?a(c.parentEl):b.parent()}function la(a){this.view=a}function ma(a){la.call(this,a),this.coordMap=new ga(this)}function na(a,b){return a.eventStartMS-b.eventStartMS||b.eventDurationMS-a.eventDurationMS||b.event.allDay-a.event.allDay||(a.event.title||"").localeCompare(b.event.title)}function oa(a){ma.call(this,a)}function pa(a,b){var c,d;for(c=0;c<b.length;c++)if(d=b[c],d.leftCol<=a.rightCol&&d.rightCol>=a.leftCol)return!0;return!1}function qa(a,b){return a.leftCol-b.leftCol}function ra(a){ma.call(this,a)}function sa(a){var b,c,d;if(a.sort(na),b=ta(a),ua(b),c=b[0]){for(d=0;d<c.length;d++)va(c[d]);for(d=0;d<c.length;d++)wa(c[d],0,0)}}function ta(a){var c,d,e,b=[];for(c=0;c<a.length;c++){for(d=a[c],e=0;e<b.length&&xa(d,b[e]).length;e++);d.level=e,(b[e]||(b[e]=[])).push(d)}return b}function ua(a){var b,c,d,e,f;for(b=0;b<a.length;b++)for(c=a[b],d=0;d<c.length;d++)for(e=c[d],e.forwardSegs=[],f=b+1;f<a.length;f++)xa(e,a[f],e.forwardSegs)}function va(a){var d,e,b=a.forwardSegs,c=0;if(void 0===a.forwardPressure){for(d=0;d<b.length;d++)e=b[d],va(e),c=Math.max(c,1+e.forwardPressure);a.forwardPressure=c}}function wa(a,b,c){var e,d=a.forwardSegs;if(void 0===a.forwardCoord)for(d.length?(d.sort(za),wa(d[0],b+1,c),a.forwardCoord=d[0].backwardCoord):a.forwardCoord=1,a.backwardCoord=a.forwardCoord-(a.forwardCoord-c)/(b+1),e=0;e<d.length;e++)wa(d[e],0,a.forwardCoord)}function xa(a,b,c){c=c||[];for(var d=0;d<b.length;d++)ya(a,b[d])&&c.push(b[d]);return c}function ya(a,b){return a.bottom>b.top&&a.top<b.bottom}function za(a,b){return b.forwardPressure-a.forwardPressure||(a.backwardCoord||0)-(b.backwardCoord||0)||na(a,b)}function Aa(c){function h(b){var c=f[b];return a.isPlainObject(c)&&!l(b)?D(c,d.name):c}function i(a,b){return c.trigger.apply(c,[a,b||d].concat(Array.prototype.slice.call(arguments,2),[d]))}function j(a){var b=a.source||{};return L(a.startEditable,b.startEditable,h("eventStartEditable"),a.editable,b.editable,h("editable"))}function k(a){var b=a.source||{};return L(a.durationEditable,b.durationEditable,h("eventDurationEditable"),a.editable,b.editable,h("editable"))}function m(a,b,d,f){var g=c.mutateEvent(b,d,null);i("eventDrop",a,b,g.dateDelta,function(){g.undo(),e()},f,{}),e()}function n(a,b,d,f){var g=c.mutateEvent(b,null,d);i("eventResize",a,b,g.durationDelta,function(){g.undo(),e()},f,{}),e()}function u(a){return b.isMoment(a)&&(a=a.day()),p[a]}function v(){return q}function w(a,b,c){var d=a.clone();for(b=b||1;p[(d.day()+(c?b:0)+7)%7];)d.add(b,"days");return d}function x(){var a=y.apply(null,arguments),b=z(a),c=A(b);return c}function y(a,b){var c=d.colCnt,e=t?-1:1,f=t?c-1:0;"object"==typeof a&&(b=a.col,a=a.row);var g=a*c+(b*e+f);return g}function z(a){var b=d.start.day();return a+=r[b],7*Math.floor(a/q)+s[(a%q+q)%q]-b}function A(a){return d.start.clone().add(a,"days")}function B(a){var b=C(a),c=E(b),d=F(c);return d}function C(a){return a.clone().stripTime().diff(d.start,"days")}function E(a){var b=d.start.day();return a+=b,Math.floor(a/7)*q+r[(a%7+7)%7]-r[b]}function F(a){var b=d.colCnt,c=t?-1:1,e=t?b-1:0,f=Math.floor(a/b),g=(a%b+b)%b*c+e;return{row:f,col:g}}function G(a,b){for(var c=d.rowCnt,e=d.colCnt,f=[],g=H(a,b),h=C(g.start),i=C(g.end),j=E(h),k=E(i)-1,l=0;l<c;l++){var m=l*e,n=m+e-1,o=Math.max(j,m),p=Math.min(k,n);if(o<=p){var q=F(o),r=F(p),s=[q.col,r.col].sort(),t=z(o)==h,u=z(p)+1==i;f.push({row:l,leftCol:s[0],rightCol:s[1],isStart:t,isEnd:u})}}return f}function H(a,b){var d,e,c=a.clone().stripTime();return b&&(d=b.clone().stripTime(),e=+b.time(),e&&e>=g&&d.add(1,"days")),(!b||d<=c)&&(d=c.clone().add(1,"days")),{start:c,end:d}}function I(a){var b=H(a.start,a.end);return b.end.diff(b.start,"days")>1}var d=this;d.calendar=c,d.opt=h,d.trigger=i,d.isEventDraggable=j,d.isEventResizable=k,d.eventDrop=m,d.eventResize=n;var e=c.reportEventChange,f=c.options,g=b.duration(f.nextDayThreshold);d.init(),d.getEventTimeText=function(a,b){var d,e;return"object"==typeof a&&"object"==typeof b?(d=a,e=b,b=arguments[2]):(d=a.start,e=a.end),b=b||h("timeFormat"),e&&h("displayEventEnd")?c.formatRange(d,e,b):c.formatDate(d,b)},d.isHiddenDay=u,d.skipHiddenDays=w,d.getCellsPerWeek=v,d.dateToCell=B,d.dateToDayOffset=C,d.dayOffsetToCellOffset=E,d.cellOffsetToCell=F,d.cellToDate=x,d.cellToCellOffset=y,d.cellOffsetToDayOffset=z,d.dayOffsetToDate=A,d.rangeToSegments=G,d.isMultiDayEvent=I;var q,o=h("hiddenDays")||[],p=[],r=[],s=[],t=h("isRTL");!function(){h("weekends")===!1&&o.push(0,6);for(var b=0,c=0;b<7;b++)r[b]=c,p[b]=a.inArray(b,o)!=-1,p[b]||(s[c]=b,c++);if(q=c,!q)throw"invalid hiddenDays"}()}function Ba(a){Aa.call(this,a),this.dayGrid=new oa(this),this.coordMap=this.dayGrid.coordMap}function Ca(a){Ba.call(this,a)}function Da(a){Ba.call(this,a)}function Ea(a){Ba.call(this,a)}function Ga(a,b){return b.longDateFormat("LT").replace(":mm","(:mm)").replace(/(\Wmm)$/,"($1)").replace(/\s*a$/i,"a")}function Ha(a,b){return b.longDateFormat("LT").replace(/\s*a$/i,"")}function Ia(a){Aa.call(this,a),this.timeGrid=new ra(this),this.opt("allDaySlot")?(this.dayGrid=new oa(this),this.coordMap=new ha([this.dayGrid.coordMap,this.timeGrid.coordMap])):this.coordMap=this.timeGrid.coordMap}function Ja(a){Ia.call(this,a)}function Ka(a){Ia.call(this,a)}var c={lang:"en",defaultTimedEventDuration:"02:00:00",defaultAllDayEventDuration:{days:1},forceEventDuration:!1,nextDayThreshold:"09:00:00",defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberTitle:"W",weekNumberCalculation:"local",lazyFetching:!0,startParam:"start",endParam:"end",timezoneParam:"timezone",timezone:!1,titleFormat:{month:"MMMM YYYY",week:"ll",day:"LL"},columnFormat:{month:"ddd",week:e,day:"dddd"},timeFormat:{default:d},displayEventEnd:{month:!1,basicWeek:!1,default:!0},isRTL:!1,defaultButtonText:{prev:"prev",next:"next",prevYear:"prev year",nextYear:"next year",today:"today",month:"month",week:"week",day:"day"},buttonIcons:{prev:"left-single-arrow",next:"right-single-arrow",prevYear:"left-double-arrow",nextYear:"right-double-arrow"},theme:!1,themeButtonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e",prevYear:"seek-prev",nextYear:"seek-next"},dragOpacity:.75,dragRevertDuration:500,dragScroll:!0,unselectAuto:!0,dropAccept:"*",eventLimit:!1,eventLimitText:"more",eventLimitClick:"popover",dayPopoverFormat:"LL",handleWindowResize:!0,windowResizeDelay:200},f={en:{columnFormat:{week:"ddd M/D"},dayPopoverFormat:"dddd, MMMM D"}},g={header:{left:"next,prev today",center:"",right:"title"},buttonIcons:{prev:"right-single-arrow",next:"left-single-arrow",prevYear:"right-double-arrow",nextYear:"left-double-arrow"},themeButtonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w",nextYear:"seek-prev",prevYear:"seek-next"}},h=a.fullCalendar={version:"2.1.1"},i=h.views={};a.fn.fullCalendar=function(b){var c=Array.prototype.slice.call(arguments,1),d=this;return this.each(function(e,f){var i,g=a(f),h=g.data("fullCalendar");"string"==typeof b?h&&a.isFunction(h[b])&&(i=h[b].apply(h,c),e||(d=i),"destroy"===b&&g.removeData("fullCalendar")):h||(h=new m(g,b),g.data("fullCalendar",h),h.render())}),d},h.langs=f,h.datepickerLang=function(b,c,d){var e=f[b];e||(e=f[b]={}),k(e,{isRTL:d.isRTL,weekNumberTitle:d.weekHeader,titleFormat:{month:d.showMonthAfterYear?"YYYY["+d.yearSuffix+"] MMMM":"MMMM YYYY["+d.yearSuffix+"]"},defaultButtonText:{prev:N(d.prevText),next:N(d.nextText),today:N(d.currentText)}}),a.datepicker&&(a.datepicker.regional[c]=a.datepicker.regional[b]=d,a.datepicker.regional.en=a.datepicker.regional[""],a.datepicker.setDefaults(d))},h.lang=function(a,b){var d;b&&(d=f[a],d||(d=f[a]={}),k(d,b||{})),c.lang=a},h.sourceNormalizers=[],h.sourceFetchers=[];var o={dataType:"json",cache:!1},p=1,E=["sun","mon","tue","wed","thu","fri","sat"];h.applyAll=K;var Q=/^\s*\d{4}-\d\d$/,R=/^\s*\d{4}-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?)?$/;h.moment=function(){return S(arguments)},h.moment.utc=function(){var a=S(arguments,!0);return a.hasTime()&&a.utc(),a},h.moment.parseZone=function(){return S(arguments,!0,!0)},T.prototype=I(b.fn),T.prototype.clone=function(){return S([this])},T.prototype.time=function(a){if(null==a)return b.duration({hours:this.hours(),minutes:this.minutes(),seconds:this.seconds(),milliseconds:this.milliseconds()});delete this._ambigTime,b.isDuration(a)||b.isMoment(a)||(a=b.duration(a));var c=0;return b.isDuration(a)&&(c=24*Math.floor(a.asDays())),this.hours(c+a.hours()).minutes(a.minutes()).seconds(a.seconds()).milliseconds(a.milliseconds())},T.prototype.stripTime=function(){var a=this.toArray();return b.fn.utc.call(this),this.year(a[0]).month(a[1]).date(a[2]).hours(0).minutes(0).seconds(0).milliseconds(0),this._ambigTime=!0,this._ambigZone=!0,this},T.prototype.hasTime=function(){return!this._ambigTime},T.prototype.stripZone=function(){var a=this.toArray(),c=this._ambigTime;return b.fn.utc.call(this),this.year(a[0]).month(a[1]).date(a[2]).hours(a[3]).minutes(a[4]).seconds(a[5]).milliseconds(a[6]),c&&(this._ambigTime=!0),this._ambigZone=!0,this},T.prototype.hasZone=function(){return!this._ambigZone},T.prototype.zone=function(a){return null!=a&&(delete this._ambigTime,delete this._ambigZone),b.fn.zone.apply(this,arguments)},T.prototype.local=function(){var a=this.toArray(),c=this._ambigZone;return delete this._ambigTime,delete this._ambigZone,b.fn.local.apply(this,arguments),c&&this.year(a[0]).month(a[1]).date(a[2]).hours(a[3]).minutes(a[4]).seconds(a[5]).milliseconds(a[6]),this},T.prototype.utc=function(){return delete this._ambigTime,delete this._ambigZone,b.fn.utc.apply(this,arguments)},T.prototype.format=function(){return arguments[0]?W(this,arguments[0]):this._ambigTime?V(this,"YYYY-MM-DD"):this._ambigZone?V(this,"YYYY-MM-DD[T]HH:mm:ss"):V(this)},T.prototype.toISOString=function(){return this._ambigTime?V(this,"YYYY-MM-DD"):this._ambigZone?V(this,"YYYY-MM-DD[T]HH:mm:ss"):b.fn.toISOString.apply(this,arguments)},T.prototype.isWithin=function(a,b){var c=U([this,a,b]);return c[0]>=c[1]&&c[0]<c[2]},T.prototype.isSame=function(a,c){var d;return c?(d=U([this,a],!0),b.fn.isSame.call(d[0],d[1],c)):(a=h.moment.parseZone(a),b.fn.isSame.call(this,a)&&Boolean(this._ambigTime)===Boolean(a._ambigTime)&&Boolean(this._ambigZone)===Boolean(a._ambigZone))},a.each(["isBefore","isAfter"],function(a,c){T.prototype[c]=function(a,d){var e=U([this,a]);return b.fn[c].call(e[0],e[1],d)}});var Y={t:function(a){return V(a,"a").charAt(0)},T:function(a){return V(a,"A").charAt(0)}};h.formatRange=$;var aa={Y:"year",M:"month",D:"day",d:"day",A:"second",a:"second",T:"second",t:"second",H:"second",h:"second",m:"second",s:"second"},ca={};fa.prototype={isHidden:!0,options:null,el:null,documentMousedownProxy:null,margin:10,show:function(){this.isHidden&&(this.el||this.render(),this.el.show(),this.position(),this.isHidden=!1,this.trigger("show"))},hide:function(){this.isHidden||(this.el.hide(),this.isHidden=!0,this.trigger("hide"))},render:function(){var b=this,c=this.options;this.el=a('<div class="fc-popover"/>').addClass(c.className||"").css({top:0,left:0}).append(c.content).appendTo(c.parentEl),this.el.on("click",".fc-close",function(){b.hide()}),c.autoHide&&a(document).on("mousedown",this.documentMousedownProxy=a.proxy(this,"documentMousedown"))},documentMousedown:function(b){this.el&&!a(b.target).closest(this.el).length&&this.hide()},destroy:function(){this.hide(),this.el&&(this.el.remove(),this.el=null),a(document).off("mousedown",this.documentMousedownProxy)},position:function(){var h,i,j,k,l,b=this.options,c=this.el.offsetParent().offset(),d=this.el.outerWidth(),e=this.el.outerHeight(),f=a(window),g=z(this.el);k=b.top||0,l=void 0!==b.left?b.left:void 0!==b.right?b.right-d:0,g.is(window)||g.is(document)?(g=f,h=0,i=0):(j=g.offset(),h=j.top,i=j.left),h+=f.scrollTop(),i+=f.scrollLeft(),b.viewportConstrain!==!1&&(k=Math.min(k,h+g.outerHeight()-e-this.margin),k=Math.max(k,h+this.margin),l=Math.min(l,i+g.outerWidth()-d-this.margin),l=Math.max(l,i+this.margin)),this.el.css({top:k-c.top,left:l-c.left})},trigger:function(a){this.options[a]&&this.options[a].apply(this,Array.prototype.slice.call(arguments,1))}},ga.prototype={grid:null,rows:null,cols:null,containerEl:null,minX:null,maxX:null,minY:null,maxY:null,build:function(){this.grid.buildCoords(this.rows=[],this.cols=[]),this.computeBounds()},getCell:function(a,b){var h,c=null,d=this.rows,e=this.cols,f=-1,g=-1;if(this.inBounds(a,b)){for(h=0;h<d.length;h++)if(b>=d[h][0]&&b<d[h][1]){f=h;break}for(h=0;h<e.length;h++)if(a>=e[h][0]&&a<e[h][1]){g=h;break}f>=0&&g>=0&&(c={row:f,col:g},c.grid=this.grid,c.date=this.grid.getCellDate(c))}return c},computeBounds:function(){var a;this.containerEl&&(a=this.containerEl.offset(),this.minX=a.left,this.maxX=a.left+this.containerEl.outerWidth(),this.minY=a.top,this.maxY=a.top+this.containerEl.outerHeight())},inBounds:function(a,b){return!this.containerEl||a>=this.minX&&a<this.maxX&&b>=this.minY&&b<this.maxY}},ha.prototype={coordMaps:null,build:function(){var b,a=this.coordMaps;for(b=0;b<a.length;b++)a[b].build()},getCell:function(a,b){var e,c=this.coordMaps,d=null;for(e=0;e<c.length&&!d;e++)d=c[e].getCell(a,b);return d}},ia.prototype={coordMap:null,options:null,isListening:!1,isDragging:!1,origCell:null,origDate:null,cell:null,date:null,mouseX0:null,mouseY0:null,mousemoveProxy:null,mouseupProxy:null,scrollEl:null,scrollBounds:null,scrollTopVel:null,scrollLeftVel:null,scrollIntervalId:null,scrollHandlerProxy:null,scrollSensitivity:30,scrollSpeed:200,scrollIntervalMs:50,mousedown:function(a){B(a)&&(a.preventDefault(),this.startListening(a),this.options.distance||this.startDrag(a))},startListening:function(b){var c,d;this.isListening||(b&&this.options.scroll&&(c=z(a(b.target)),c.is(window)||c.is(document)||(this.scrollEl=c,this.scrollHandlerProxy=P(a.proxy(this,"scrollHandler"),100),this.scrollEl.on("scroll",this.scrollHandlerProxy))),this.computeCoords(),b&&(d=this.getCell(b),this.origCell=d,this.origDate=d?d.date:null,this.mouseX0=b.pageX,this.mouseY0=b.pageY),a(document).on("mousemove",this.mousemoveProxy=a.proxy(this,"mousemove")).on("mouseup",this.mouseupProxy=a.proxy(this,"mouseup")).on("selectstart",this.preventDefault),this.isListening=!0,this.trigger("listenStart",b))},computeCoords:function(){this.coordMap.build(),this.computeScrollBounds()},mousemove:function(a){var b,c;this.isDragging||(b=this.options.distance||1,c=Math.pow(a.pageX-this.mouseX0,2)+Math.pow(a.pageY-this.mouseY0,2),c>=b*b&&this.startDrag(a)),this.isDragging&&this.drag(a)},startDrag:function(a){var b;this.isListening||this.startListening(),this.isDragging||(this.isDragging=!0,this.trigger("dragStart",a),b=this.getCell(a),
b&&this.cellOver(b,!0))},drag:function(a){var b;this.isDragging&&(b=this.getCell(a),ja(b,this.cell)||(this.cell&&this.cellOut(),b&&this.cellOver(b)),this.dragScroll(a))},cellOver:function(a){this.cell=a,this.date=a.date,this.trigger("cellOver",a,a.date)},cellOut:function(){this.cell&&(this.trigger("cellOut",this.cell),this.cell=null,this.date=null)},mouseup:function(a){this.stopDrag(a),this.stopListening(a)},stopDrag:function(a){this.isDragging&&(this.stopScrolling(),this.trigger("dragStop",a),this.isDragging=!1)},stopListening:function(b){this.isListening&&(this.scrollEl&&(this.scrollEl.off("scroll",this.scrollHandlerProxy),this.scrollHandlerProxy=null),a(document).off("mousemove",this.mousemoveProxy).off("mouseup",this.mouseupProxy).off("selectstart",this.preventDefault),this.mousemoveProxy=null,this.mouseupProxy=null,this.isListening=!1,this.trigger("listenStop",b),this.origCell=this.cell=null,this.origDate=this.date=null)},getCell:function(a){return this.coordMap.getCell(a.pageX,a.pageY)},trigger:function(a){this.options[a]&&this.options[a].apply(this,Array.prototype.slice.call(arguments,1))},preventDefault:function(a){a.preventDefault()},computeScrollBounds:function(){var b,a=this.scrollEl;a&&(b=a.offset(),this.scrollBounds={top:b.top,left:b.left,bottom:b.top+a.outerHeight(),right:b.left+a.outerWidth()})},dragScroll:function(a){var d,e,f,g,b=this.scrollSensitivity,c=this.scrollBounds,h=0,i=0;c&&(d=(b-(a.pageY-c.top))/b,e=(b-(c.bottom-a.pageY))/b,f=(b-(a.pageX-c.left))/b,g=(b-(c.right-a.pageX))/b,d>=0&&d<=1?h=d*this.scrollSpeed*-1:e>=0&&e<=1&&(h=e*this.scrollSpeed),f>=0&&f<=1?i=f*this.scrollSpeed*-1:g>=0&&g<=1&&(i=g*this.scrollSpeed)),this.setScrollVel(h,i)},setScrollVel:function(b,c){this.scrollTopVel=b,this.scrollLeftVel=c,this.constrainScrollVel(),!this.scrollTopVel&&!this.scrollLeftVel||this.scrollIntervalId||(this.scrollIntervalId=setInterval(a.proxy(this,"scrollIntervalFunc"),this.scrollIntervalMs))},constrainScrollVel:function(){var a=this.scrollEl;this.scrollTopVel<0?a.scrollTop()<=0&&(this.scrollTopVel=0):this.scrollTopVel>0&&a.scrollTop()+a[0].clientHeight>=a[0].scrollHeight&&(this.scrollTopVel=0),this.scrollLeftVel<0?a.scrollLeft()<=0&&(this.scrollLeftVel=0):this.scrollLeftVel>0&&a.scrollLeft()+a[0].clientWidth>=a[0].scrollWidth&&(this.scrollLeftVel=0)},scrollIntervalFunc:function(){var a=this.scrollEl,b=this.scrollIntervalMs/1e3;this.scrollTopVel&&a.scrollTop(a.scrollTop()+this.scrollTopVel*b),this.scrollLeftVel&&a.scrollLeft(a.scrollLeft()+this.scrollLeftVel*b),this.constrainScrollVel(),this.scrollTopVel||this.scrollLeftVel||this.stopScrolling()},stopScrolling:function(){this.scrollIntervalId&&(clearInterval(this.scrollIntervalId),this.scrollIntervalId=null,this.computeCoords())},scrollHandler:function(){this.scrollIntervalId||this.computeCoords()}},ka.prototype={options:null,sourceEl:null,el:null,parentEl:null,top0:null,left0:null,mouseY0:null,mouseX0:null,topDelta:null,leftDelta:null,mousemoveProxy:null,isFollowing:!1,isHidden:!1,isAnimating:!1,start:function(b){this.isFollowing||(this.isFollowing=!0,this.mouseY0=b.pageY,this.mouseX0=b.pageX,this.topDelta=0,this.leftDelta=0,this.isHidden||this.updatePosition(),a(document).on("mousemove",this.mousemoveProxy=a.proxy(this,"mousemove")))},stop:function(b,c){function f(){this.isAnimating=!1,d.destroyEl(),this.top0=this.left0=null,c&&c()}var d=this,e=this.options.revertDuration;this.isFollowing&&!this.isAnimating&&(this.isFollowing=!1,a(document).off("mousemove",this.mousemoveProxy),b&&e&&!this.isHidden?(this.isAnimating=!0,this.el.animate({top:this.top0,left:this.left0},{duration:e,complete:f})):f())},getEl:function(){var a=this.el;return a||(this.sourceEl.width(),a=this.el=this.sourceEl.clone().css({position:"absolute",visibility:"",display:this.isHidden?"none":"",margin:0,right:"auto",bottom:"auto",width:this.sourceEl.width(),height:this.sourceEl.height(),opacity:this.options.opacity||"",zIndex:this.options.zIndex}).appendTo(this.parentEl)),a},destroyEl:function(){this.el&&(this.el.remove(),this.el=null)},updatePosition:function(){var a,b;this.getEl(),null===this.top0&&(this.sourceEl.width(),a=this.sourceEl.offset(),b=this.el.offsetParent().offset(),this.top0=a.top-b.top,this.left0=a.left-b.left),this.el.css({top:this.top0+this.topDelta,left:this.left0+this.leftDelta})},mousemove:function(a){this.topDelta=a.pageY-this.mouseY0,this.leftDelta=a.pageX-this.mouseX0,this.isHidden||this.updatePosition()},hide:function(){this.isHidden||(this.isHidden=!0,this.el&&this.el.hide())},show:function(){this.isHidden&&(this.isHidden=!1,this.updatePosition(),this.getEl().show())}},la.prototype={view:null,cellHtml:"<td/>",rowHtml:function(a,b){var f,g,c=this.view,d=this.getHtmlRenderer("cell",a),e="";for(b=b||0,f=0;f<c.colCnt;f++)g=c.cellToDate(b,f),e+=d(b,f,g);return e=this.bookendCells(e,a,b),"<tr>"+e+"</tr>"},bookendCells:function(a,b,c){var d=this.view,e=this.getHtmlRenderer("intro",b)(c||0),f=this.getHtmlRenderer("outro",b)(c||0),g=d.opt("isRTL"),h=g?f:e,i=g?e:f;return"string"==typeof a?h+a+i:a.prepend(h).append(i)},getHtmlRenderer:function(a,b){var d,e,f,g,c=this.view;return d=a+"Html",b&&(e=b+O(a)+"Html"),e&&(g=c[e])?f=c:e&&(g=this[e])?f=this:(g=c[d])?f=c:(g=this[d])&&(f=this),"function"==typeof g?function(a){return g.apply(f,arguments)||""}:function(){return g||""}}},ma.prototype=I(la.prototype),a.extend(ma.prototype,{el:null,coordMap:null,cellDuration:null,render:function(){this.bindHandlers()},destroy:function(){},buildCoords:function(a,b){},getCellDate:function(a){},getCellDayEl:function(a){},rangeToSegs:function(a,b){},bindHandlers:function(){var b=this;this.el.on("mousedown",function(c){a(c.target).is(".fc-event-container *, .fc-more")||a(c.target).closest(".fc-popover").length||b.dayMousedown(c)}),this.bindSegHandlers()},dayMousedown:function(a){var f,g,h,b=this,c=this.view,d=c.opt("selectable"),e=null,i=new ia(this.coordMap,{scroll:c.opt("dragScroll"),dragStart:function(){c.unselect()},cellOver:function(a,c){i.origDate&&(h=b.getCellDayEl(a),e=[c,i.origDate].sort(H),f=e[0],g=e[1].clone().add(b.cellDuration),d&&b.renderSelection(f,g))},cellOut:function(a,c){e=null,b.destroySelection()},listenStop:function(a){e&&(e[0].isSame(e[1])&&c.trigger("dayClick",h[0],f,a),d&&c.reportSelection(f,g,a))}});i.mousedown(a)},renderDrag:function(a,b,c){},destroyDrag:function(){},renderResize:function(a,b,c){},destroyResize:function(){},renderRangeHelper:function(a,b,c){var e,d=this.view;!b&&d.opt("forceEventDuration")&&(b=d.calendar.getDefaultEventEnd(!a.hasTime(),a)),e=c?I(c.event):{},e.start=a,e.end=b,e.allDay=!(a.hasTime()||b&&b.hasTime()),e.className=(e.className||[]).concat("fc-helper"),c||(e.editable=!1),this.renderHelper(e,c)},renderHelper:function(a,b){},destroyHelper:function(){},renderSelection:function(a,b){this.renderHighlight(a,b)},destroySelection:function(){this.destroyHighlight()},renderHighlight:function(a,b){},destroyHighlight:function(){},headHtml:function(){return'<div class="fc-row '+this.view.widgetHeaderClass+'"><table><thead>'+this.rowHtml("head")+"</thead></table></div>"},headCellHtml:function(a,b,c){var d=this.view,e=d.calendar,f=d.opt("columnFormat");return'<th class="fc-day-header '+d.widgetHeaderClass+" fc-"+E[c.day()]+'">'+M(e.formatDate(c,f))+"</th>"},bgCellHtml:function(a,b,c){var d=this.view,e=this.getDayClasses(c);return e.unshift("fc-day",d.widgetContentClass),'<td class="'+e.join(" ")+'" data-date="'+c.format()+'"></td>'},getDayClasses:function(a){var b=this.view,c=b.calendar.getNow().stripTime(),d=["fc-"+E[a.day()]];return"month"===b.name&&a.month()!=b.intervalStart.month()&&d.push("fc-other-month"),a.isSame(c,"day")?d.push("fc-today",b.highlightStateClass):a<c?d.push("fc-past"):d.push("fc-future"),d}}),a.extend(ma.prototype,{mousedOverSeg:null,isDraggingSeg:!1,isResizingSeg:!1,renderEvents:function(a){},getSegs:function(){},destroyEvents:function(){this.triggerSegMouseout()},renderSegs:function(b,c){var g,d=this.view,e="",f=[];for(g=0;g<b.length;g++)e+=this.renderSegHtml(b[g],c);return a(e).each(function(c,e){var g=b[c];if(g&&g.event){var h=d.resolveEventEl(g.event,a(e));h&&(h.data("fc-seg",g),g.el=h,f.push(g))}}),f},renderSegHtml:function(a,b){},eventsToSegs:function(b,c,d){var e=this;return a.map(b,function(a){return e.eventToSegs(a,c,d)})},eventToSegs:function(a,b,c){var f,g,h,d=a.start.clone().stripZone(),e=this.view.calendar.getEventEnd(a).stripZone();for(b&&c?(h=C(d,e,b,c),f=h?[h]:[]):f=this.rangeToSegs(d,e),g=0;g<f.length;g++)h=f[g],h.event=a,h.eventStartMS=+d,h.eventDurationMS=e-d;return f},bindSegHandlers:function(){var b=this,c=this.view;a.each({mouseenter:function(a,c){b.triggerSegMouseover(a,c)},mouseleave:function(a,c){b.triggerSegMouseout(a,c)},click:function(a,b){return c.trigger("eventClick",this,a.event,b)},mousedown:function(d,e){a(e.target).is(".fc-resizer")&&c.isEventResizable(d.event)?b.segResizeMousedown(d,e):c.isEventDraggable(d.event)&&b.segDragMousedown(d,e)}},function(c,d){b.el.on(c,".fc-event-container > *",function(c){var e=a(this).data("fc-seg");if(e&&!b.isDraggingSeg&&!b.isResizingSeg)return d.call(this,e,c)})})},triggerSegMouseover:function(a,b){this.mousedOverSeg||(this.mousedOverSeg=a,this.view.trigger("eventMouseover",a.el[0],a.event,b))},triggerSegMouseout:function(a,b){b=b||{},this.mousedOverSeg&&(a=a||this.mousedOverSeg,this.mousedOverSeg=null,this.view.trigger("eventMouseout",a.el[0],a.event,b))},segDragMousedown:function(a,b){var g,h,c=this,d=this.view,e=a.el,f=a.event,i=new ka(a.el,{parentEl:d.el,opacity:d.opt("dragOpacity"),revertDuration:d.opt("dragRevertDuration"),zIndex:2}),j=new ia(d.coordMap,{distance:5,scroll:d.opt("dragScroll"),listenStart:function(a){i.hide(),i.start(a)},dragStart:function(b){c.triggerSegMouseout(a,b),c.isDraggingSeg=!0,d.hideEvent(f),d.trigger("eventDragStart",e[0],f,b,{})},cellOver:function(b,e){var f=a.cellDate||j.origDate,k=c.computeDraggedEventDates(a,f,e);g=k.start,h=k.end,d.renderDrag(g,h,a)?i.hide():i.show()},cellOut:function(){g=null,d.destroyDrag(),i.show()},dragStop:function(a){var b=g&&!g.isSame(f.start);i.stop(!b,function(){c.isDraggingSeg=!1,d.destroyDrag(),d.showEvent(f),d.trigger("eventDragStop",e[0],f,a,{}),b&&d.eventDrop(e[0],f,g,a)})},listenStop:function(){i.stop()}});j.mousedown(b)},computeDraggedEventDates:function(a,b,c){var h,i,j,d=this.view,e=a.event,f=e.start,g=d.calendar.getEventEnd(e);return c.hasTime()===b.hasTime()?(h=F(c,b),i=f.clone().add(h),j=null===e.end?null:g.clone().add(h)):(i=c,j=null),{start:i,end:j}},segResizeMousedown:function(a,b){function k(){c.destroyResize(),d.showEvent(f)}var j,c=this,d=this.view,e=a.el,f=a.event,g=f.start,h=d.calendar.getEventEnd(f),i=null;j=new ia(this.coordMap,{distance:5,scroll:d.opt("dragScroll"),dragStart:function(b){c.triggerSegMouseout(a,b),c.isResizingSeg=!0,d.trigger("eventResizeStart",e[0],f,b,{})},cellOver:function(b,e){e.isBefore(g)&&(e=g),i=e.clone().add(c.cellDuration),i.isSame(h)?(i=null,k()):(c.renderResize(g,i,a),d.hideEvent(f))},cellOut:function(){i=null,k()},dragStop:function(a){c.isResizingSeg=!1,k(),d.trigger("eventResizeStop",e[0],f,a,{}),i&&d.eventResize(e[0],f,i,a)}}),j.mousedown(b)},getSegClasses:function(a,b,c){var d=a.event,e=["fc-event",a.isStart?"fc-start":"fc-not-start",a.isEnd?"fc-end":"fc-not-end"].concat(d.className,d.source?d.source.className:[]);return b&&e.push("fc-draggable"),c&&e.push("fc-resizable"),e},getEventSkinCss:function(a){var b=this.view,c=a.source||{},d=a.color,e=c.color,f=b.opt("eventColor"),g=a.backgroundColor||d||c.backgroundColor||e||b.opt("eventBackgroundColor")||f,h=a.borderColor||d||c.borderColor||e||b.opt("eventBorderColor")||f,i=a.textColor||c.textColor||b.opt("eventTextColor"),j=[];return g&&j.push("background-color:"+g),h&&j.push("border-color:"+h),i&&j.push("color:"+i),j.join(";")}}),oa.prototype=I(ma.prototype),a.extend(oa.prototype,{numbersVisible:!1,cellDuration:b.duration({days:1}),bottomCoordPadding:0,rowEls:null,dayEls:null,helperEls:null,highlightEls:null,render:function(b){var e,c=this.view,d="";for(e=0;e<c.rowCnt;e++)d+=this.dayRowHtml(e,b);this.el.html(d),this.rowEls=this.el.find(".fc-row"),this.dayEls=this.el.find(".fc-day"),this.dayEls.each(function(b,d){var e=c.cellToDate(Math.floor(b/c.colCnt),b%c.colCnt);c.trigger("dayRender",null,e,a(d))}),ma.prototype.render.call(this)},destroy:function(){this.destroySegPopover()},dayRowHtml:function(a,b){var c=this.view,d=["fc-row","fc-week",c.widgetContentClass];return b&&d.push("fc-rigid"),'<div class="'+d.join(" ")+'"><div class="fc-bg"><table>'+this.rowHtml("day",a)+'</table></div><div class="fc-content-skeleton"><table>'+(this.numbersVisible?"<thead>"+this.rowHtml("number",a)+"</thead>":"")+"</table></div></div>"},dayCellHtml:function(a,b,c){return this.bgCellHtml(a,b,c)},buildCoords:function(b,c){var e,f,g,d=this.view.colCnt;this.dayEls.slice(0,d).each(function(b,d){e=a(d),f=e.offset().left,b&&(g[1]=f),g=[f],c[b]=g}),g[1]=f+e.outerWidth(),this.rowEls.each(function(c,d){e=a(d),f=e.offset().top,c&&(g[1]=f),g=[f],b[c]=g}),g[1]=f+e.outerHeight()+this.bottomCoordPadding},getCellDate:function(a){return this.view.cellToDate(a)},getCellDayEl:function(a){return this.dayEls.eq(a.row*this.view.colCnt+a.col)},rangeToSegs:function(a,b){return this.view.rangeToSegments(a,b)},renderDrag:function(a,b,c){var d;if(this.renderHighlight(a,b||this.view.calendar.getDefaultEventEnd(!0,a)),c&&!c.el.closest(this.el).length)return this.renderRangeHelper(a,b,c),d=this.view.opt("dragOpacity"),void 0!==d&&this.helperEls.css("opacity",d),!0},destroyDrag:function(){this.destroyHighlight(),this.destroyHelper()},renderResize:function(a,b,c){this.renderHighlight(a,b),this.renderRangeHelper(a,b,c)},destroyResize:function(){this.destroyHighlight(),this.destroyHelper()},renderHelper:function(b,c){var d=[],e=this.renderEventRows([b]);this.rowEls.each(function(b,f){var i,g=a(f),h=a('<div class="fc-helper-skeleton"><table/></div>');i=c&&c.row===b?c.el.position().top:g.find(".fc-content-skeleton tbody").position().top,h.css("top",i).find("table").append(e[b].tbodyEl),g.append(h),d.push(h[0])}),this.helperEls=a(d)},destroyHelper:function(){this.helperEls&&(this.helperEls.remove(),this.helperEls=null)},renderHighlight:function(b,c){var f,g,h,d=this.rangeToSegs(b,c),e=[];for(f=0;f<d.length;f++)g=d[f],h=a(this.highlightSkeletonHtml(g.leftCol,g.rightCol+1)),h.appendTo(this.rowEls[g.row]),e.push(h[0]);this.highlightEls=a(e)},destroyHighlight:function(){this.highlightEls&&(this.highlightEls.remove(),this.highlightEls=null)},highlightSkeletonHtml:function(a,b){var c=this.view.colCnt,d="";return a>0&&(d+='<td colspan="'+a+'"/>'),b>a&&(d+='<td colspan="'+(b-a)+'" class="fc-highlight" />'),c>b&&(d+='<td colspan="'+(c-b)+'"/>'),d=this.bookendCells(d,"highlight"),'<div class="fc-highlight-skeleton"><table><tr>'+d+"</tr></table></div>"}}),a.extend(oa.prototype,{segs:null,rowStructs:null,renderEvents:function(b){var c=this.rowStructs=this.renderEventRows(b),d=[];this.rowEls.each(function(b,e){a(e).find(".fc-content-skeleton > table").append(c[b].tbodyEl),d.push.apply(d,c[b].segs)}),this.segs=d},getSegs:function(){return(this.segs||[]).concat(this.popoverSegs||[])},destroyEvents:function(){var a,b;for(ma.prototype.destroyEvents.call(this),a=this.rowStructs||[];b=a.pop();)b.tbodyEl.remove();this.segs=null,this.destroySegPopover()},renderEventRows:function(a){var d,e,b=this.eventsToSegs(a),c=[];for(b=this.renderSegs(b),d=this.groupSegRows(b),e=0;e<d.length;e++)c.push(this.renderEventRow(e,d[e]));return c},renderSegHtml:function(a,b){var k,c=this.view,d=c.opt("isRTL"),e=a.event,f=c.isEventDraggable(e),g=!b&&e.allDay&&a.isEnd&&c.isEventResizable(e),h=this.getSegClasses(a,f,g),i=this.getEventSkinCss(e),j="";return h.unshift("fc-day-grid-event"),!e.allDay&&a.isStart&&(j='<span class="fc-time">'+M(c.getEventTimeText(e))+"</span>"),k='<span class="fc-title">'+(M(e.title||"")||"&nbsp;")+"</span>",'<a class="'+h.join(" ")+'"'+(e.url?' href="'+M(e.url)+'"':"")+(i?' style="'+i+'"':"")+'><div class="fc-content" id="'+e.id+'">'+(d?k+" "+j:j+" "+k)+"</div>"+(g?'<div class="fc-resizer"/>':"")+"</a>"},renderEventRow:function(b,c){function s(b){for(;n<b;)r=(k[l-1]||[])[n],r?r.attr("rowspan",parseInt(r.attr("rowspan")||1,10)+1):(r=a("<td/>"),o.append(r)),j[l][n]=r,k[l][n]=r,n++}var l,m,n,o,p,q,r,d=this.view,e=d.colCnt,f=this.buildSegLevels(c),g=Math.max(1,f.length),h=a("<tbody/>"),i=[],j=[],k=[];for(l=0;l<g;l++){if(m=f[l],n=0,o=a("<tr/>"),i.push([]),j.push([]),k.push([]),m)for(p=0;p<m.length;p++){for(q=m[p],s(q.leftCol),r=a('<td class="fc-event-container"/>').append(q.el),q.leftCol!=q.rightCol?r.attr("colspan",q.rightCol-q.leftCol+1):k[l][n]=r;n<=q.rightCol;)j[l][n]=r,i[l][n]=q,n++;o.append(r)}s(e),this.bookendCells(o,"eventSkeleton"),h.append(o)}return{row:b,tbodyEl:h,cellMatrix:j,segMatrix:i,segLevels:f,segs:c}},buildSegLevels:function(a){var c,d,e,b=[];for(a.sort(na),c=0;c<a.length;c++){for(d=a[c],e=0;e<b.length&&pa(d,b[e]);e++);d.level=e,(b[e]||(b[e]=[])).push(d)}for(e=0;e<b.length;e++)b[e].sort(qa);return b},groupSegRows:function(a){var d,b=this.view,c=[];for(d=0;d<b.rowCnt;d++)c.push([]);for(d=0;d<a.length;d++)c[a[d].row].push(a[d]);return c}}),a.extend(oa.prototype,{segPopover:null,popoverSegs:null,destroySegPopover:function(){this.segPopover&&this.segPopover.hide()},limitRows:function(a){var c,d,b=this.rowStructs||[];for(c=0;c<b.length;c++)this.unlimitRow(c),d=!!a&&("number"==typeof a?a:this.computeRowLevelLimit(c)),d!==!1&&this.limitRow(c,d)},computeRowLevelLimit:function(a){var e,f,b=this.rowEls.eq(a),c=b.height(),d=this.rowStructs[a].tbodyEl.children();for(e=0;e<d.length;e++)if(f=d.eq(e).removeClass("fc-limited"),f.position().top+f.outerHeight()>c)return e;return!1},limitRow:function(b,c){function y(e){for(;h<e;)i={row:b,col:h},o=d.getCellSegs(i,c),o.length&&(r=k[c-1][h],x=d.renderMoreLink(i,o),w=a("<div/>").append(x),r.append(w),g.push(w[0])),h++}var i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,d=this,e=this.view,f=this.rowStructs[b],g=[],h=0;if(c&&c<f.segLevels.length){for(j=f.segLevels[c-1],k=f.cellMatrix,l=f.tbodyEl.children().slice(c).addClass("fc-limited").get(),m=0;m<j.length;m++){for(n=j[m],y(n.leftCol),q=[],p=0;h<=n.rightCol;)i={row:b,col:h},o=this.getCellSegs(i,c),q.push(o),p+=o.length,h++;if(p){for(r=k[c-1][n.leftCol],s=r.attr("rowspan")||1,t=[],u=0;u<q.length;u++)v=a('<td class="fc-more-cell"/>').attr("rowspan",s),o=q[u],i={row:b,col:n.leftCol+u},x=this.renderMoreLink(i,[n].concat(o)),w=a("<div/>").append(x),v.append(w),t.push(v[0]),g.push(v[0]);r.addClass("fc-limited").after(a(t)),l.push(r[0])}}y(e.colCnt),f.moreEls=a(g),f.limitedEls=a(l)}},unlimitRow:function(a){var b=this.rowStructs[a];b.moreEls&&(b.moreEls.remove(),b.moreEls=null),b.limitedEls&&(b.limitedEls.removeClass("fc-limited"),b.limitedEls=null)},renderMoreLink:function(b,c){var d=this,e=this.view;return a('<a class="fc-more"/>').text(this.getMoreLinkText(c.length)).on("click",function(f){var g=e.opt("eventLimitClick"),h=e.cellToDate(b),i=a(this),j=d.getCellDayEl(b),k=d.getCellSegs(b),l=d.resliceDaySegs(k,h),m=d.resliceDaySegs(c,h);"function"==typeof g&&(g=e.trigger("eventLimitClick",null,{date:h,dayEl:j,moreEl:i,segs:l,hiddenSegs:m},f)),"popover"===g?d.showSegPopover(h,b,i,l):"string"==typeof g&&e.calendar.zoomTo(h,g)})},showSegPopover:function(a,b,c,d){var h,i,e=this,f=this.view,g=c.parent();h=1==f.rowCnt?this.view.el:this.rowEls.eq(b.row),i={className:"fc-more-popover",content:this.renderSegPopoverContent(a,d),parentEl:this.el,top:h.offset().top,autoHide:!0,viewportConstrain:f.opt("popoverViewportConstrain"),hide:function(){e.segPopover.destroy(),e.segPopover=null,e.popoverSegs=null}},f.opt("isRTL")?i.right=g.offset().left+g.outerWidth()+1:i.left=g.offset().left-1,this.segPopover=new fa(i),this.segPopover.show()},renderSegPopoverContent:function(b,c){var i,d=this.view,e=d.opt("theme"),f=b.format(d.opt("dayPopoverFormat")),g=a('<div class="fc-header '+d.widgetHeaderClass+'"><span class="fc-close '+(e?"ui-icon ui-icon-closethick":"fc-icon fc-icon-x")+'"></span><span class="fc-title">'+M(f)+'</span><div class="fc-clear"/></div><div class="fc-body '+d.widgetContentClass+'"><div class="fc-event-container"></div></div>'),h=g.find(".fc-event-container");for(c=this.renderSegs(c,!0),this.popoverSegs=c,i=0;i<c.length;i++)c[i].cellDate=b,h.append(c[i].el);return g},resliceDaySegs:function(b,c){var d=a.map(b,function(a){return a.event}),e=c.clone().stripTime(),f=e.clone().add(1,"days");return this.eventsToSegs(d,e,f)},getMoreLinkText:function(a){var b=this.view,c=b.opt("eventLimitText");return"function"==typeof c?c(a):"+"+a+" "+c},getCellSegs:function(a,b){for(var f,c=this.rowStructs[a.row].segMatrix,d=b||0,e=[];d<c.length;)f=c[d][a.col],f&&e.push(f),d++;return e}}),ra.prototype=I(ma.prototype),a.extend(ra.prototype,{slotDuration:null,snapDuration:null,minTime:null,maxTime:null,dayEls:null,slatEls:null,slatTops:null,highlightEl:null,helperEl:null,render:function(){this.processOptions(),this.el.html(this.renderHtml()),this.dayEls=this.el.find(".fc-day"),this.slatEls=this.el.find(".fc-slats tr"),this.computeSlatTops(),ma.prototype.render.call(this)},renderHtml:function(){return'<div class="fc-bg"><table>'+this.rowHtml("slotBg")+'</table></div><div class="fc-slats"><table>'+this.slatRowHtml()+"</table></div>"},slotBgCellHtml:function(a,b,c){return this.bgCellHtml(a,b,c)},slatRowHtml:function(){for(var h,i,j,a=this.view,c=a.calendar,d=a.opt("isRTL"),e="",f=this.slotDuration.asMinutes()%15===0,g=b.duration(+this.minTime);g<this.maxTime;)h=a.start.clone().time(g),i=h.minutes(),j='<td class="fc-axis fc-time '+a.widgetContentClass+'" '+a.axisStyleAttr()+">"+(f&&i?"":"<span>"+M(c.formatDate(h,a.opt("axisFormat")))+"</span>")+"</td>",e+="<tr "+(i?'class="fc-minor"':"")+">"+(d?"":j)+'<td class="'+a.widgetContentClass+'"/>'+(d?j:"")+"</tr>",g.add(this.slotDuration);return e},processOptions:function(){var a=this.view,c=a.opt("slotDuration"),d=a.opt("snapDuration");c=b.duration(c),d=d?b.duration(d):c,this.slotDuration=c,this.snapDuration=d,this.cellDuration=d,this.minTime=b.duration(a.opt("minTime")),this.maxTime=b.duration(a.opt("maxTime"))},rangeToSegs:function(a,b){var e,f,g,h,i,c=this.view,d=[];for(a=a.clone().stripZone(),b=b.clone().stripZone(),f=0;f<c.colCnt;f++)g=c.cellToDate(0,f),h=g.clone().time(this.minTime),i=g.clone().time(this.maxTime),e=C(a,b,h,i),e&&(e.col=f,d.push(e));return d},resize:function(){this.computeSlatTops(),this.updateSegVerticals()},buildCoords:function(c,d){var i,j,e=this.view.colCnt,f=this.el.offset().top,g=b.duration(+this.minTime),h=null;for(this.dayEls.slice(0,e).each(function(b,c){i=a(c),j=i.offset().left,h&&(h[1]=j),h=[j],d[b]=h}),h[1]=j+i.outerWidth(),h=null;g<this.maxTime;)j=f+this.computeTimeTop(g),h&&(h[1]=j),h=[j],c.push(h),g.add(this.snapDuration);h[1]=f+this.computeTimeTop(g)},getCellDate:function(a){var b=this.view,c=b.calendar;return c.rezoneDate(b.cellToDate(0,a.col).time(this.minTime+this.snapDuration*a.row))},getCellDayEl:function(a){return this.dayEls.eq(a.col)},computeDateTop:function(a,c){return this.computeTimeTop(b.duration(a.clone().stripZone()-c.clone().stripTime()))},computeTimeTop:function(a){var c,d,e,f,b=(a-this.minTime)/this.slotDuration;return b=Math.max(0,b),b=Math.min(this.slatEls.length,b),c=Math.floor(b),d=b-c,e=this.slatTops[c],d?(f=this.slatTops[c+1],e+(f-e)*d):e},computeSlatTops:function(){var c,b=[];this.slatEls.each(function(d,e){c=a(e).position().top,b.push(c)}),b.push(c+this.slatEls.last().outerHeight()),this.slatTops=b},renderDrag:function(a,b,c){var d;return c?(this.renderRangeHelper(a,b,c),d=this.view.opt("dragOpacity"),void 0!==d&&this.helperEl.css("opacity",d),!0):void this.renderHighlight(a,b||this.view.calendar.getDefaultEventEnd(!1,a))},destroyDrag:function(){this.destroyHelper(),this.destroyHighlight()},renderResize:function(a,b,c){this.renderRangeHelper(a,b,c)},destroyResize:function(){this.destroyHelper()},renderHelper:function(b,c){var g,h,i,d=this.renderEventTable([b]),e=d.tableEl,f=d.segs;for(g=0;g<f.length;g++)h=f[g],c&&c.col===h.col&&(i=c.el,h.el.css({left:i.css("left"),right:i.css("right"),"margin-left":i.css("margin-left"),"margin-right":i.css("margin-right")}));this.helperEl=a('<div class="fc-helper-skeleton"/>').append(e).appendTo(this.el)},destroyHelper:function(){this.helperEl&&(this.helperEl.remove(),this.helperEl=null)},renderSelection:function(a,b){this.view.opt("selectHelper")?this.renderRangeHelper(a,b):this.renderHighlight(a,b)},destroySelection:function(){this.destroyHelper(),this.destroyHighlight()},renderHighlight:function(b,c){this.highlightEl=a(this.highlightSkeletonHtml(b,c)).appendTo(this.el)},destroyHighlight:function(){this.highlightEl&&(this.highlightEl.remove(),this.highlightEl=null)},highlightSkeletonHtml:function(a,b){var g,h,i,j,k,c=this.view,d=this.rangeToSegs(a,b),e="",f=0;for(g=0;g<d.length;g++)h=d[g],f<h.col&&(e+='<td colspan="'+(h.col-f)+'"/>',f=h.col),i=c.cellToDate(0,f),j=this.computeDateTop(h.start,i),k=this.computeDateTop(h.end,i),e+='<td><div class="fc-highlight-container"><div class="fc-highlight" style="top:'+j+"px;bottom:-"+k+'px"/></div></td>',f++;return f<c.colCnt&&(e+='<td colspan="'+(c.colCnt-f)+'"/>'),e=this.bookendCells(e,"highlight"),'<div class="fc-highlight-skeleton"><table><tr>'+e+"</tr></table></div>"}}),a.extend(ra.prototype,{segs:null,eventSkeletonEl:null,renderEvents:function(b){var c=this.renderEventTable(b);this.eventSkeletonEl=a('<div class="fc-content-skeleton"/>').append(c.tableEl),this.el.append(this.eventSkeletonEl),this.segs=c.segs},getSegs:function(){return this.segs||[]},destroyEvents:function(){ma.prototype.destroyEvents.call(this),this.eventSkeletonEl&&(this.eventSkeletonEl.remove(),this.eventSkeletonEl=null),this.segs=null},renderEventTable:function(b){var f,g,h,i,j,k,c=a("<table><tr/></table>"),d=c.find("tr"),e=this.eventsToSegs(b);for(e=this.renderSegs(e),f=this.groupSegCols(e),this.computeSegVerticals(e),i=0;i<f.length;i++){for(j=f[i],sa(j),k=a('<div class="fc-event-container"/>'),g=0;g<j.length;g++)h=j[g],h.el.css(this.generateSegPositionCss(h)),h.bottom-h.top<30&&h.el.addClass("fc-short"),k.append(h.el);d.append(a("<td/>").append(k))}return this.bookendCells(d,"eventSkeleton"),{tableEl:c,segs:e}},updateSegVerticals:function(){var b,a=this.segs;if(a)for(this.computeSegVerticals(a),b=0;b<a.length;b++)a[b].el.css(this.generateSegVerticalCss(a[b]))},computeSegVerticals:function(a){var b,c;for(b=0;b<a.length;b++)c=a[b],c.top=this.computeDateTop(c.start,c.start),c.bottom=this.computeDateTop(c.end,c.start)},renderSegHtml:function(a,b){var i,j,k,c=this.view,d=a.event,e=c.isEventDraggable(d),f=!b&&a.isEnd&&c.isEventResizable(d),g=this.getSegClasses(a,e,f),h=this.getEventSkinCss(d);return g.unshift("fc-time-grid-event"),c.isMultiDayEvent(d)?(a.isStart||a.isEnd)&&(i=c.getEventTimeText(a.start,a.end),j=c.getEventTimeText(a.start,a.end,"LT"),k=c.getEventTimeText(a.start,null)):(i=c.getEventTimeText(d),j=c.getEventTimeText(d,"LT"),k=c.getEventTimeText(d.start,null)),'<a class="'+g.join(" ")+'"'+(d.url?' href="'+M(d.url)+'"':"")+(h?' style="'+h+'"':"")+'><div class="fc-content">'+(i?'<div class="fc-time" data-start="'+M(k)+'" data-full="'+M(j)+'"><span>'+M(i)+"</span></div>":"")+(d.title?'<div class="fc-title">'+M(d.title)+"</div>":"")+'</div><div class="fc-bg"/>'+(f?'<div class="fc-resizer"/>':"")+"</a>"},generateSegPositionCss:function(a){var h,i,b=this.view,c=b.opt("isRTL"),d=b.opt("slotEventOverlap"),e=a.backwardCoord,f=a.forwardCoord,g=this.generateSegVerticalCss(a);return d&&(f=Math.min(1,e+2*(f-e))),c?(h=1-f,i=e):(h=e,i=1-f),g.zIndex=a.level+1,g.left=100*h+"%",g.right=100*i+"%",d&&a.forwardPressure&&(g[c?"marginLeft":"marginRight"]=20),g},generateSegVerticalCss:function(a){return{top:a.top,bottom:-a.bottom}},groupSegCols:function(a){var d,b=this.view,c=[];for(d=0;d<b.colCnt;d++)c.push([]);for(d=0;d<a.length;d++)c[a[d].col].push(a[d]);return c}}),Aa.prototype={calendar:null,coordMap:null,el:null,start:null,end:null,intervalStart:null,intervalEnd:null,rowCnt:null,colCnt:null,isSelected:!1,scrollerEl:null,scrollTop:null,widgetHeaderClass:null,widgetContentClass:null,highlightStateClass:null,documentMousedownProxy:null,documentDragStartProxy:null,init:function(){var b=this.opt("theme")?"ui":"fc";this.widgetHeaderClass=b+"-widget-header",this.widgetContentClass=b+"-widget-content",this.highlightStateClass=b+"-state-highlight",this.documentMousedownProxy=a.proxy(this,"documentMousedown"),this.documentDragStartProxy=a.proxy(this,"documentDragStart")},render:function(){this.updateSize(),this.trigger("viewRender",this,this,this.el),a(document).on("mousedown",this.documentMousedownProxy).on("dragstart",this.documentDragStartProxy)},destroy:function(){this.unselect(),this.trigger("viewDestroy",this,this,this.el),this.destroyEvents(),this.el.empty(),a(document).off("mousedown",this.documentMousedownProxy).off("dragstart",this.documentDragStartProxy)},incrementDate:function(a,b){},updateSize:function(a){a&&this.recordScroll(),this.updateHeight(),this.updateWidth()},updateWidth:function(){},updateHeight:function(){var a=this.calendar;this.setHeight(a.getSuggestedViewHeight(),a.isHeightAuto())},setHeight:function(a,b){},computeScrollerHeight:function(a){var c,b=this.el.add(this.scrollerEl);return b.css({position:"relative",left:-1}),c=this.el.outerHeight()-this.scrollerEl.height(),b.css({position:"",left:""}),a-c},recordScroll:function(){this.scrollerEl&&(this.scrollTop=this.scrollerEl.scrollTop())},restoreScroll:function(){null!==this.scrollTop&&this.scrollerEl.scrollTop(this.scrollTop)},renderEvents:function(a){this.segEach(function(a){this.trigger("eventAfterRender",a.event,a.event,a.el)}),this.trigger("eventAfterAllRender")},destroyEvents:function(){this.segEach(function(a){this.trigger("eventDestroy",a.event,a.event,a.el)})},resolveEventEl:function(b,c){var d=this.trigger("eventRender",b,b,c);return d===!1?c=null:d&&d!==!0&&(c=a(d)),c},showEvent:function(a){this.segEach(function(a){a.el.css("visibility","")},a)},hideEvent:function(a){this.segEach(function(a){a.el.css("visibility","hidden")},a)},segEach:function(a,b){var d,c=this.getSegs();for(d=0;d<c.length;d++)b&&c[d].event._id!==b._id||a.call(this,c[d])},getSegs:function(){},renderDrag:function(a,b,c){},destroyDrag:function(){},documentDragStart:function(b,c){var f,d=this,e=null;this.opt("droppable")&&(f=new ia(this.coordMap,{cellOver:function(a,b){e=b,d.renderDrag(b)},cellOut:function(){e=null,d.destroyDrag()}}),a(document).one("dragstop",function(a,b){d.destroyDrag(),e&&d.trigger("drop",a.target,e,a,b)}),f.startDrag(b))},select:function(a,b,c){this.unselect(c),this.renderSelection(a,b),this.reportSelection(a,b,c)},renderSelection:function(a,b){},reportSelection:function(a,b,c){this.isSelected=!0,this.trigger("select",null,a,b,c)},unselect:function(a){this.isSelected&&(this.isSelected=!1,this.destroySelection(),this.trigger("unselect",null,a))},destroySelection:function(){},documentMousedown:function(b){var c;this.isSelected&&this.opt("unselectAuto")&&B(b)&&(c=this.opt("unselectCancel"),c&&a(b.target).closest(c).length||this.unselect(b))}},Ba.prototype=I(Aa.prototype),a.extend(Ba.prototype,{dayGrid:null,dayNumbersVisible:!1,weekNumbersVisible:!1,weekNumberWidth:null,headRowEl:null,render:function(a,b,c){this.rowCnt=a,this.colCnt=b,this.dayNumbersVisible=c,this.weekNumbersVisible=this.opt("weekNumbers"),this.dayGrid.numbersVisible=this.dayNumbersVisible||this.weekNumbersVisible,this.el.addClass("fc-basic-view").html(this.renderHtml()),this.headRowEl=this.el.find("thead .fc-row"),this.scrollerEl=this.el.find(".fc-day-grid-container"),this.dayGrid.coordMap.containerEl=this.scrollerEl,this.dayGrid.el=this.el.find(".fc-day-grid"),this.dayGrid.render(this.hasRigidRows()),Aa.prototype.render.call(this)},destroy:function(){this.dayGrid.destroy(),Aa.prototype.destroy.call(this)},renderHtml:function(){return'<table><thead><tr><td class="'+this.widgetHeaderClass+'">'+this.dayGrid.headHtml()+'</td></tr></thead><tbody><tr><td class="'+this.widgetContentClass+'"><div class="fc-day-grid-container"><div class="fc-day-grid"/></div></td></tr></tbody></table>';
},headIntroHtml:function(){if(this.weekNumbersVisible)return'<th class="fc-week-number '+this.widgetHeaderClass+'" '+this.weekNumberStyleAttr()+"><span>"+M(this.opt("weekNumberTitle"))+"</span></th>"},numberIntroHtml:function(a){if(this.weekNumbersVisible)return'<td class="fc-week-number" '+this.weekNumberStyleAttr()+"><span>"+this.calendar.calculateWeekNumber(this.cellToDate(a,0))+"</span></td>"},dayIntroHtml:function(){if(this.weekNumbersVisible)return'<td class="fc-week-number '+this.widgetContentClass+'" '+this.weekNumberStyleAttr()+"></td>"},introHtml:function(){if(this.weekNumbersVisible)return'<td class="fc-week-number" '+this.weekNumberStyleAttr()+"></td>"},numberCellHtml:function(a,b,c){var d;return this.dayNumbersVisible?(d=this.dayGrid.getDayClasses(c),d.unshift("fc-day-number"),'<td class="'+d.join(" ")+'" data-date="'+c.format()+'">'+c.date()+"</td>"):"<td/>"},weekNumberStyleAttr:function(){return null!==this.weekNumberWidth?'style="width:'+this.weekNumberWidth+'px"':""},hasRigidRows:function(){var a=this.opt("eventLimit");return a&&"number"!=typeof a},updateWidth:function(){this.weekNumbersVisible&&(this.weekNumberWidth=w(this.el.find(".fc-week-number")))},setHeight:function(a,b){var d,c=this.opt("eventLimit");y(this.scrollerEl),t(this.headRowEl),this.dayGrid.destroySegPopover(),c&&"number"==typeof c&&this.dayGrid.limitRows(c),d=this.computeScrollerHeight(a),this.setGridHeight(d,b),c&&"number"!=typeof c&&this.dayGrid.limitRows(c),!b&&x(this.scrollerEl,d)&&(s(this.headRowEl,A(this.scrollerEl)),d=this.computeScrollerHeight(a),this.scrollerEl.height(d),this.restoreScroll())},setGridHeight:function(a,b){b?v(this.dayGrid.rowEls):u(this.dayGrid.rowEls,a,!0)},renderEvents:function(a){this.dayGrid.renderEvents(a),this.updateHeight(),Aa.prototype.renderEvents.call(this,a)},getSegs:function(){return this.dayGrid.getSegs()},destroyEvents:function(){Aa.prototype.destroyEvents.call(this),this.recordScroll(),this.dayGrid.destroyEvents()},renderDrag:function(a,b,c){return this.dayGrid.renderDrag(a,b,c)},destroyDrag:function(){this.dayGrid.destroyDrag()},renderSelection:function(a,b){this.dayGrid.renderSelection(a,b)},destroySelection:function(){this.dayGrid.destroySelection()}}),j({fixedWeekCount:!0}),i.month=Ca,Ca.prototype=I(Ba.prototype),a.extend(Ca.prototype,{name:"month",incrementDate:function(a,b){return a.clone().stripTime().add(b,"months").startOf("month")},render:function(a){var b;this.intervalStart=a.clone().stripTime().startOf("month"),this.intervalEnd=this.intervalStart.clone().add(1,"months"),this.start=this.intervalStart.clone(),this.start=this.skipHiddenDays(this.start),this.start.startOf("week"),this.start=this.skipHiddenDays(this.start),this.end=this.intervalEnd.clone(),this.end=this.skipHiddenDays(this.end,-1,!0),this.end.add((7-this.end.weekday())%7,"days"),this.end=this.skipHiddenDays(this.end,-1,!0),b=Math.ceil(this.end.diff(this.start,"weeks",!0)),this.isFixedWeeks()&&(this.end.add(6-b,"weeks"),b=6),this.title=this.calendar.formatDate(this.intervalStart,this.opt("titleFormat")),Ba.prototype.render.call(this,b,this.getCellsPerWeek(),!0)},setGridHeight:function(a,b){b=b||"variable"===this.opt("weekMode"),b&&(a*=this.rowCnt/6),u(this.dayGrid.rowEls,a,!b)},isFixedWeeks:function(){var a=this.opt("weekMode");return a?"fixed"===a:this.opt("fixedWeekCount")}}),i.basicWeek=Da,Da.prototype=I(Ba.prototype),a.extend(Da.prototype,{name:"basicWeek",incrementDate:function(a,b){return a.clone().stripTime().add(b,"weeks").startOf("week")},render:function(a){this.intervalStart=a.clone().stripTime().startOf("week"),this.intervalEnd=this.intervalStart.clone().add(1,"weeks"),this.start=this.skipHiddenDays(this.intervalStart),this.end=this.skipHiddenDays(this.intervalEnd,-1,!0),this.title=this.calendar.formatRange(this.start,this.end.clone().subtract(1),this.opt("titleFormat")," — "),Ba.prototype.render.call(this,1,this.getCellsPerWeek(),!1)}}),i.basicDay=Ea,Ea.prototype=I(Ba.prototype),a.extend(Ea.prototype,{name:"basicDay",incrementDate:function(a,b){var c=a.clone().stripTime().add(b,"days");return c=this.skipHiddenDays(c,b<0?-1:1)},render:function(a){this.start=this.intervalStart=a.clone().stripTime(),this.end=this.intervalEnd=this.start.clone().add(1,"days"),this.title=this.calendar.formatDate(this.start,this.opt("titleFormat")),Ba.prototype.render.call(this,1,1,!1)}}),j({allDaySlot:!0,allDayText:"all-day",scrollTime:"06:00:00",slotDuration:"00:30:00",axisFormat:Ga,timeFormat:{agenda:Ha},minTime:"00:00:00",maxTime:"24:00:00",slotEventOverlap:!0});var Fa=5;Ia.prototype=I(Aa.prototype),a.extend(Ia.prototype,{timeGrid:null,dayGrid:null,axisWidth:null,noScrollRowEls:null,bottomRuleEl:null,bottomRuleHeight:null,render:function(b){this.rowCnt=1,this.colCnt=b,this.el.addClass("fc-agenda-view").html(this.renderHtml()),this.scrollerEl=this.el.find(".fc-time-grid-container"),this.timeGrid.coordMap.containerEl=this.scrollerEl,this.timeGrid.el=this.el.find(".fc-time-grid"),this.timeGrid.render(),this.bottomRuleEl=a('<hr class="'+this.widgetHeaderClass+'"/>').appendTo(this.timeGrid.el),this.dayGrid&&(this.dayGrid.el=this.el.find(".fc-day-grid"),this.dayGrid.render(),this.dayGrid.bottomCoordPadding=this.dayGrid.el.next("hr").outerHeight()),this.noScrollRowEls=this.el.find(".fc-row:not(.fc-scroller *)"),Aa.prototype.render.call(this),this.resetScroll()},destroy:function(){this.timeGrid.destroy(),this.dayGrid&&this.dayGrid.destroy(),Aa.prototype.destroy.call(this)},renderHtml:function(){return'<table><thead><tr><td class="'+this.widgetHeaderClass+'">'+this.timeGrid.headHtml()+'</td></tr></thead><tbody><tr><td class="'+this.widgetContentClass+'">'+(this.dayGrid?'<div class="fc-day-grid"/><hr class="'+this.widgetHeaderClass+'"/>':"")+'<div class="fc-time-grid-container"><div class="fc-time-grid"/></div></td></tr></tbody></table>'},headIntroHtml:function(){var a,b,c,d;return this.opt("weekNumbers")?(a=this.cellToDate(0,0),b=this.calendar.calculateWeekNumber(a),c=this.opt("weekNumberTitle"),d=this.opt("isRTL")?b+c:c+b,'<th class="fc-axis fc-week-number '+this.widgetHeaderClass+'" '+this.axisStyleAttr()+"><span>"+M(d)+"</span></th>"):'<th class="fc-axis '+this.widgetHeaderClass+'" '+this.axisStyleAttr()+"></th>"},dayIntroHtml:function(){return'<td class="fc-axis '+this.widgetContentClass+'" '+this.axisStyleAttr()+"><span>"+(this.opt("allDayHtml")||M(this.opt("allDayText")))+"</span></td>"},slotBgIntroHtml:function(){return'<td class="fc-axis '+this.widgetContentClass+'" '+this.axisStyleAttr()+"></td>"},introHtml:function(){return'<td class="fc-axis" '+this.axisStyleAttr()+"></td>"},axisStyleAttr:function(){return null!==this.axisWidth?'style="width:'+this.axisWidth+'px"':""},updateSize:function(a){a&&this.timeGrid.resize(),Aa.prototype.updateSize.call(this,a)},updateWidth:function(){this.axisWidth=w(this.el.find(".fc-axis"))},setHeight:function(a,b){var c,d;null===this.bottomRuleHeight&&(this.bottomRuleHeight=this.bottomRuleEl.outerHeight()),this.bottomRuleEl.hide(),this.scrollerEl.css("overflow",""),y(this.scrollerEl),t(this.noScrollRowEls),this.dayGrid&&(this.dayGrid.destroySegPopover(),c=this.opt("eventLimit"),c&&"number"!=typeof c&&(c=Fa),c&&this.dayGrid.limitRows(c)),b||(d=this.computeScrollerHeight(a),x(this.scrollerEl,d)?(s(this.noScrollRowEls,A(this.scrollerEl)),d=this.computeScrollerHeight(a),this.scrollerEl.height(d),this.restoreScroll()):(this.scrollerEl.height(d).css("overflow","hidden"),this.bottomRuleEl.show()))},resetScroll:function(){function e(){a.scrollerEl.scrollTop(d)}var a=this,c=b.duration(this.opt("scrollTime")),d=this.timeGrid.computeTimeTop(c);d=Math.ceil(d),d&&d++,e(),setTimeout(e,0)},renderEvents:function(a){var e,f,b=[],c=[],d=[];for(f=0;f<a.length;f++)a[f].allDay?b.push(a[f]):c.push(a[f]);e=this.timeGrid.renderEvents(c),this.dayGrid&&(d=this.dayGrid.renderEvents(b)),this.updateHeight(),Aa.prototype.renderEvents.call(this,a)},getSegs:function(){return this.timeGrid.getSegs().concat(this.dayGrid?this.dayGrid.getSegs():[])},destroyEvents:function(){Aa.prototype.destroyEvents.call(this),this.recordScroll(),this.timeGrid.destroyEvents(),this.dayGrid&&this.dayGrid.destroyEvents()},renderDrag:function(a,b,c){return a.hasTime()?this.timeGrid.renderDrag(a,b,c):this.dayGrid?this.dayGrid.renderDrag(a,b,c):void 0},destroyDrag:function(){this.timeGrid.destroyDrag(),this.dayGrid&&this.dayGrid.destroyDrag()},renderSelection:function(a,b){a.hasTime()||b.hasTime()?this.timeGrid.renderSelection(a,b):this.dayGrid&&this.dayGrid.renderSelection(a,b)},destroySelection:function(){this.timeGrid.destroySelection(),this.dayGrid&&this.dayGrid.destroySelection()}}),i.agendaWeek=Ja,Ja.prototype=I(Ia.prototype),a.extend(Ja.prototype,{name:"agendaWeek",incrementDate:function(a,b){return a.clone().stripTime().add(b,"weeks").startOf("week")},render:function(a){this.intervalStart=a.clone().stripTime().startOf("week"),this.intervalEnd=this.intervalStart.clone().add(1,"weeks"),this.start=this.skipHiddenDays(this.intervalStart),this.end=this.skipHiddenDays(this.intervalEnd,-1,!0),this.title=this.calendar.formatRange(this.start,this.end.clone().subtract(1),this.opt("titleFormat")," — "),Ia.prototype.render.call(this,this.getCellsPerWeek())}}),i.agendaDay=Ka,Ka.prototype=I(Ia.prototype),a.extend(Ka.prototype,{name:"agendaDay",incrementDate:function(a,b){var c=a.clone().stripTime().add(b,"days");return c=this.skipHiddenDays(c,b<0?-1:1)},render:function(a){this.start=this.intervalStart=a.clone().stripTime(),this.end=this.intervalEnd=this.start.clone().add(1,"days"),this.title=this.calendar.formatDate(this.start,this.opt("titleFormat")),Ia.prototype.render.call(this,1)}})});